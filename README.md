# sftpserver
sftpserver using terraform

Note: jq should be installed on your local machine.

Step 1: Generate an SSH key using ssh-keygen command. This key will be used by our SFTP user to access our SFTP server.

Step 2: Get the Terraform code given in my repo. Set up the variables values in terraform.tfvars and execute following commands:
---------terraform init
---------terraform plan
---------terraform apply --auto-approve

The default value for s3 bucket is sftp2022 and you may need to set it in terraform.tfvars because bucket name needs to be unique.

Step 3: Once executed successfully, our SFTP server backed with S3 storage, along with a user will be created.

Step 4: Since this SFTP server is accessible within the VPC only, launch an EC2 instance using Amazon Linux 2 AMI in the VPC and connect to it. Copy the private key generated by ssh-keygen command as ~/.ssh/id_rsa and set its permission to 400.

Also note down the VPC Endpointâ€™s DNS given as endpoint-dns in Terraform output.

Once you are done with all this, execute following command to connect to our SFTP server

sftp internet@<VPC_ENDPOINT_DNS>
lcd <directory_where_you_created_text_files>
put a.txt
put b.txt
put c.txt

Now go to S3 console and check whether the files are uploaded to our S3 bucket or not

for the second part of the assignment.run the filescanner.py in the ec2 created



